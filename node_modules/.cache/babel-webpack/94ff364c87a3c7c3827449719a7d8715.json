{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport { Hauptkategorie, Subkategorie, WizardStage, Fragen, Input, Miethistorie, Mieten, Rechnungen, Standort } from './mietprozess/mietprozess.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nexport let ApiService = /*#__PURE__*/(() => {\n  class ApiService {\n    constructor(http, router) {\n      this.http = http;\n      this.router = router; //baseURL: string = 'http://localhost:3000/';\n\n      this.baseURL = 'https://diesdas.codersunlimited.de/diesdas/api/overview.php';\n      this.first = 'https://diesdas.codersunlimited.de/diesdas/api/overview.php?mode=endpunkte';\n      this.Apikey = '540cbd6b79f6a406737e09f00adfb8828b3b920ec8ce050b9b466b76f68197cc';\n      /*\n      if (document.getElementById('id_menu_wrapper')) {\n        if (document.getElementById('id_menu_wrapper').style.display == 'block') {\n          document.getElementById('id_menu_btn').classList.remove('open');\n          document.getElementById('id_menu_btn').classList.add('open');\n        } else {\n          document.getElementById('id_menu_btn').classList.remove('open');\n        }\n      }\n      */\n      //console.log(\"BACKFISCH\");\n    }\n\n    generateInput(eingabe) {\n      var result = '';\n\n      for (let i = 0; i < eingabe.length; i++) {\n        if (result == '') {\n          result = '{\"' + eingabe[i][0] + '\":\"' + eingabe[i][1] + '\"';\n        } else {\n          result += ',\"' + eingabe[i][0] + '\":\"' + eingabe[i][1] + '\"';\n        }\n      }\n\n      result += '}';\n      return result;\n    }\n\n    loadByCategories(haupt, sub, callback, x) {\n      var input = '{\"hauptkategorie\":\"' + haupt + '\",\"subkategorie\":\"' + sub + '\"}';\n      this.postEndpunkt(input, 'produktbycat').subscribe(data => {\n        //result = data;\n        console.log('getData=> produktbycat: '); //console.log(data);\n\n        callback(data['produkte'], x);\n      });\n    }\n\n    getCookie(cname) {\n      var name = cname + '=';\n      var decodedCookie = decodeURIComponent(document.cookie);\n      var ca = decodedCookie.split(';');\n\n      for (var i = 0; i < ca.length; i++) {\n        var c = ca[i];\n\n        while (c.charAt(0) == ' ') {\n          c = c.substring(1);\n        }\n\n        if (c.indexOf(name) == 0) {\n          return c.substring(name.length, c.length);\n        }\n      }\n\n      return '';\n    }\n\n    externalLogoutCheck() {\n      if (!sessionStorage.getItem('Usertoken')) {\n        console.log('LOGOUT'); //document.getElementById('extraorder').style.display = 'none';\n\n        sessionStorage.clear();\n      }\n    }\n\n    externalLogoutCheck2() {\n      if (!sessionStorage.getItem('Usertoken')) {\n        if (document.getElementById('id_account_btn')) {\n          document.getElementById('id_account_btn').classList.remove('loggedin');\n\n          if (document.getElementById('extraorder')) {\n            document.getElementById('extraorder').style.display = 'none';\n          }\n        }\n      } else {\n        if (document.getElementById('id_account_btn')) {\n          if (!document.getElementById('id_account_btn').classList.contains('loggedin')) {\n            document.getElementById('id_account_btn').classList.add('loggedin');\n          }\n        }\n      }\n    }\n\n    getData(file, callback, x) {\n      this.getEndpunkt(file).subscribe(data => {\n        //result = data;\n        //console.log('getData=> ' + file + ': ' + JSON.stringify(data));\n        callback(data, x);\n      });\n    }\n\n    doi(filename, hash) {\n      var title = 'doi_end';\n\n      if (localStorage.getItem(title)) {\n        var url = JSON.parse(localStorage.getItem(title))['endpunkt'];\n      } //console.log(url);\n\n\n      url += '&filename=' + filename + '&hash=' + hash; //console.log(url);\n\n      var result = this.http.get(url, {\n        headers: new HttpHeaders({\n          'Content-Type': 'application/json'\n        })\n      }); //console.log(result);\n\n      return result;\n    }\n\n    getEndpunkt(file) {\n      /*\n      var url = 'https://diesdas.codersunlimited.de/diesdas/api/overview.php';\n      console.log(url + '?mode=' + file);\n      var modifier = '?mode=' + file;\n      */\n      var url = this.baseURL + '?mode=' + file;\n      var title = file + '_end';\n\n      if (localStorage.getItem(title)) {\n        var ra = JSON.parse(localStorage.getItem(title));\n        url = ra['endpunkt'];\n        var url_b = window.location;\n\n        if (ra['alt'] && url_b.pathname.includes('geraete-mieten')) {\n          url = ra['alt'];\n        }\n      }\n\n      console.log(url);\n      var result = this.http.get(url, {\n        headers: new HttpHeaders({\n          'Content-Type': 'application/json'\n        })\n      }); //console.log(result);\n\n      return result;\n    }\n\n    updateUser(input, email, usertoken) {\n      const headers = {\n        'content-type': 'application/json'\n      };\n      const body = input; //console.log('TO SEND: ' + body);\n\n      var url = this.baseURL;\n      var title = 'user2_end';\n      url = JSON.parse(localStorage.getItem(title))['endpunkt'];\n      url += '&filename=' + email + '&token=' + usertoken;\n      console.log(url);\n      return this.http.post(url, body, {\n        headers: headers\n      });\n    }\n\n    ostern(input) {\n      console.log('Get Endpunkte');\n      var result = this.http.get('https://customsearch.googleapis.com/customsearch/v1?cx=f0ec6c2cb84dace21&num=6&q=' + input + '&searchType=image&alt=json&key=AIzaSyCt1vlX_NkxBgwYTuGfDUAIwYTf8eYoH-o', {\n        headers: new HttpHeaders({\n          'Content-Type': 'application/json'\n        })\n      }); //console.log(result);\n\n      return result;\n    }\n\n    postEndpunkt(input, file) {\n      const headers = {\n        'content-type': 'application/json'\n      };\n      const body = input; //console.log(body);\n\n      var url = this.baseURL;\n      var title = file + '_end';\n      console.log(JSON.parse(input));\n      console.log(title);\n\n      if (localStorage.getItem(title)) {\n        url = JSON.parse(localStorage.getItem(title))['endpunkt'];\n      }\n\n      console.log(url);\n      /*\n      if (!url) {\n        url =\n          'https://diesdas.codersunlimited.de/diesdas/api/overview2.php?mode=' +\n          file;\n      }\n      */\n\n      return this.http.post(url, body, {\n        headers: headers\n      });\n    }\n\n    endpunkte() {\n      console.log('Get Endpunkte');\n      var result = this.http.get(this.first, {\n        headers: new HttpHeaders({\n          'Content-Type': 'application/json'\n        })\n      }); //console.log(result);\n\n      return result;\n    }\n\n    login(cred) {\n      const headers = {\n        'content-type': 'application/json'\n      };\n      const body = JSON.stringify(cred); //console.log(body);\n\n      var url = this.baseURL;\n      var title = 'login_end';\n      url = JSON.parse(localStorage.getItem(title)); //console.log(url);\n      //console.log(title);\n\n      return this.http.post(url['endpunkt'], body, {\n        headers: headers\n      });\n    }\n\n    language(lang) {\n      /*\n      var url = 'https://diesdas.codersunlimited.de/diesdas/api/overview.php';\n      console.log('apiservice start');\n      console.log(url + '?mode=language&lang=' + lang);\n      var modifier = '?mode=language&lang=' + lang;\n      */\n      var url = this.baseURL + '?mode=language&lang=' + lang;\n      var title = 'language' + lang.toUpperCase() + '_end'; //console.log(title);\n      //console.log('Endpunkt:');\n      //console.log(localStorage.getItem(title));\n\n      url = JSON.parse(localStorage.getItem(title));\n      var result = this.http.get(url['endpunkt'], {\n        headers: new HttpHeaders({\n          'Content-Type': 'application/json'\n        })\n      }); //console.log(result);\n      //console.log('apiservice end');\n\n      return result;\n    }\n\n    startupChain(step) {\n      //1. Endpunkte laden\n      //2. Menü laden\n      //3. Labels laden\n      sessionStorage.setItem('DEV', 'true');\n\n      if (step == 1) {\n        console.log('Lade Endpunkte');\n        this.endpunkte().subscribe(data => {\n          //endpunkte geladen\n          console.log(data);\n          var endstring = JSON.stringify(data);\n          var count = data['count'];\n\n          for (let i = 0; i < count; i++) {\n            var tmp = data[i];\n            localStorage.setItem(tmp['title'] + '_end', JSON.stringify(tmp));\n            console.log(localStorage.getItem(tmp['title'] + '_end')); //console.log(tmp['endpunkt']);\n\n            console.log('set as ' + tmp['title'] + '_end'); //Alle geladenen Endpunkte\n\n            var changed = new Date(tmp['changed'] * 1000); //console.log( tmp['title'] +              ' stellt Daten bereit vom ' +              changed +              ' bereit.(api)'          );\n          }\n\n          localStorage.setItem('endpunkte', endstring); //this.followUp();\n\n          this.startupChain(2);\n        });\n      }\n\n      if (step == 2) {\n        console.log('Lade Menü');\n        var reload = true;\n\n        if (localStorage.getItem('menue')) {\n          var menue = JSON.parse(localStorage.getItem('menue'));\n          var local_changed = parseInt(menue['changed']); //console.log(local_changed);\n\n          var endpunkt = JSON.parse(localStorage.getItem('menue_end'));\n          var endpunkt_changed = parseInt(endpunkt['changed']);\n\n          if (local_changed >= endpunkt_changed) {\n            reload = false;\n            this.startupChain(3);\n          }\n        }\n\n        if (reload) {\n          console.log('Neuere Daten gefunden! Reloade Menü!'); //Wenn nichts aktuelles vorhanden ist, lade Menü\n\n          this.getEndpunkt('menue').subscribe(data => {\n            //console.log('--------');\n            //console.log(data);\n            //console.log('--------');\n            localStorage.setItem('menue', JSON.stringify(data));\n            localStorage.setItem('menue_changed', data['changed']);\n            this.startupChain(3);\n          });\n        }\n      }\n\n      if (step == 3) {\n        console.log('Lade Sprache');\n        var reload = true;\n        var lang = 'DE';\n\n        if (sessionStorage.getItem('language')) {\n          lang = sessionStorage.getItem('language');\n        }\n\n        if (localStorage.getItem(lang + '_changed')) {\n          //var menue = JSON.parse(localStorage.getItem('Startseite_end'));\n          var local_changed = parseInt(localStorage.getItem(lang + '_changed'));\n          var endpunkt = JSON.parse(localStorage.getItem('language' + lang + '_end'));\n          var endpunkt_changed = parseInt(endpunkt['changed']);\n\n          if (local_changed >= endpunkt_changed) {\n            reload = false;\n            this.startupChain(4);\n          }\n        }\n\n        if (reload) {\n          console.log('Neuere Daten gefunden! Reloade Sprache!'); //Wenn nichts aktuelles vorhanden ist, lade Sprache\n\n          this.language(lang).subscribe(data => {\n            //console.log('--------');\n            //console.log(data);\n            //console.log('--------');\n            sessionStorage.setItem('language', lang);\n            localStorage.setItem(lang + '_changed', data['changed']);\n            var count = data['count'];\n\n            for (let i = 0; i < count; i++) {\n              var tmp = data[i];\n              var name = tmp['title_element'] + '_' + lang;\n              localStorage.setItem(name, JSON.stringify(tmp));\n            }\n\n            this.startupChain(4);\n          });\n        }\n      }\n\n      if (step == 4) {\n        console.log('Lade Sprachen');\n        var reload = true;\n\n        if (localStorage.getItem('sprachen')) {\n          var sprachen = JSON.parse(localStorage.getItem('sprachen'));\n          var local_changed = parseInt(sprachen['changed']);\n          var endpunkt = JSON.parse(localStorage.getItem('languages_end'));\n          var endpunkt_changed = parseInt(endpunkt['changed']);\n\n          if (local_changed >= endpunkt_changed) {\n            reload = false;\n            this.startupChain(5);\n          }\n        }\n\n        if (reload) {\n          console.log('Neuere Daten gefunden! Reloade Sprachen!'); //Wenn nichts aktuelles vorhanden ist, lade Sprachen\n\n          this.getEndpunkt('languages').subscribe(data => {\n            //console.log('--------');\n            //console.log(data);\n            //console.log('--------');\n            localStorage.setItem('sprachen', JSON.stringify(data));\n            this.startupChain(5);\n          });\n        }\n      }\n\n      if (step == 5) {\n        console.log('Lade Kategorien');\n        var reload = true;\n\n        if (localStorage.getItem('kategorie')) {\n          var kategorien = JSON.parse(localStorage.getItem('kategorie'));\n          var local_changed = parseInt(kategorien['changed']);\n          var endpunkt = JSON.parse(localStorage.getItem('kategorie_end'));\n          var endpunkt_changed = parseInt(endpunkt['changed']);\n\n          if (local_changed >= endpunkt_changed) {\n            reload = false;\n            this.startupChain(6);\n          }\n        }\n\n        if (reload) {\n          console.log('Neuere Daten gefunden! Reloade Kategorien!'); //Wenn nichts aktuelles vorhanden ist, lade Sprachen\n\n          this.getEndpunkt('kategorie').subscribe(data => {\n            localStorage.setItem('kategorie', JSON.stringify(data)); //console.log('--------');\n            //console.log(data['toastbrot']);\n            //console.log('--------');\n\n            console.log(data);\n            var kategorien2 = Array();\n            var kats = data['toastbrot'];\n            var main = kats['Hauptkategorie'];\n            var sub = kats['Subkategorie'];\n            var count = main['count'];\n\n            for (let i = 0; i < count; i++) {\n              var neu = new Hauptkategorie(main[i]['title'], main[i]['link'], main[i]['slug']);\n              var rel = sub[main[i]['slug']];\n              var count2 = rel['count']; //console.log(main[i]['slug'] + ': ' + count2);\n\n              for (let j = 0; j < count2; j++) {\n                //console.log(rel[j]['title'] + ': ' + j);\n                var neusub = new Subkategorie(rel[j]['title'], rel[j]['link'], rel[j]['slug']);\n                neu.add(neusub);\n              }\n\n              kategorien2.push(neu);\n            }\n\n            localStorage.setItem('kategorie', JSON.stringify(kategorien2));\n            this.startupChain(6);\n          });\n        }\n      } //Wizard\n\n\n      if (step == 6) {\n        console.log('Lade Wizard');\n        var reload = true;\n\n        if (localStorage.getItem('wizard_raw')) {\n          var wizard = JSON.parse(localStorage.getItem('wizard_raw'));\n          var local_changed = parseInt(wizard['changed']);\n          var endpunkt = JSON.parse(localStorage.getItem('wizard_end'));\n          var endpunkt_changed = parseInt(endpunkt['changed']);\n\n          if (local_changed >= endpunkt_changed) {\n            reload = false;\n            this.constructWizard(wizard);\n            this.followUp();\n          }\n        }\n\n        if (reload) {\n          console.log('Neuere Daten gefunden! Reloade Wizard!'); //Wenn nichts aktuelles vorhanden ist, lade Sprachen\n\n          this.getEndpunkt('wizard').subscribe(data => {\n            //localStorage.setItem('kategorie', JSON.stringify(data));\n            //console.log('--------');\n            //console.log(data);\n            //console.log('--------');\n            localStorage.setItem('wizard_raw', JSON.stringify(data));\n            var wizard = JSON.parse(localStorage.getItem('wizard_raw'));\n            this.constructWizard(wizard);\n            this.followUp();\n          });\n        }\n      }\n    }\n\n    startupChain2(step) {\n      //1. Endpunkte laden\n      //2. Menü laden\n      //3. Labels laden\n      sessionStorage.setItem('DEV', 'true');\n\n      if (step == 1) {\n        console.log('Lade Endpunkte');\n        this.endpunkte().subscribe(data => {\n          //endpunkte geladen\n          //console.log(data);\n          var endstring = JSON.stringify(data);\n          var count = data['count'];\n\n          for (let i = 0; i < count; i++) {\n            var tmp = data[i];\n            localStorage.setItem(tmp['title'] + '_end', JSON.stringify(tmp)); //console.log('set as ' + tmp['title'] + '_end'); //Alle geladenen Endpunkte\n\n            var changed = new Date(tmp['changed'] * 1000); //console.log(            tmp['title'] +              ' stellt Daten bereit vom ' +              changed +              ' bereit.(api)'          );\n          }\n\n          sessionStorage.setItem('endpunkte', endstring); //this.followUp();\n\n          this.startupChain2(2);\n        });\n      }\n\n      if (step == 2) {\n        console.log('Lade Menü');\n        var reload = true;\n\n        if (localStorage.getItem('menue')) {\n          var menue = JSON.parse(localStorage.getItem('menue'));\n          var local_changed = parseInt(menue['changed']); //console.log(local_changed);\n\n          var endpunkt = JSON.parse(localStorage.getItem('menue_end'));\n          var endpunkt_changed = parseInt(endpunkt['changed']);\n\n          if (local_changed >= endpunkt_changed) {\n            reload = false;\n            this.startupChain2(3);\n          }\n        }\n\n        if (reload) {\n          console.log('Neuere Daten gefunden! Reloade Menü!'); //Wenn nichts aktuelles vorhanden ist, lade Menü\n\n          this.getEndpunkt('menue').subscribe(data => {\n            //console.log('--------');\n            //console.log(data);\n            //console.log('--------');\n            localStorage.setItem('menue', JSON.stringify(data));\n            localStorage.setItem('menue_changed', data['changed']);\n            this.startupChain2(3);\n          });\n        }\n      }\n\n      if (step == 3) {\n        console.log('Lade Sprache');\n        var reload = true;\n        var lang = 'DE';\n\n        if (sessionStorage.getItem('language')) {\n          lang = sessionStorage.getItem('language');\n        }\n\n        if (localStorage.getItem(lang + '_changed')) {\n          //var menue = JSON.parse(localStorage.getItem('Startseite_end'));\n          var local_changed = parseInt(localStorage.getItem(lang + '_changed'));\n          var endpunkt = JSON.parse(localStorage.getItem('language' + lang + '_end'));\n          var endpunkt_changed = parseInt(endpunkt['changed']);\n\n          if (local_changed >= endpunkt_changed) {\n            reload = false;\n            this.startupChain2(4);\n          }\n        }\n\n        if (reload) {\n          console.log('Neuere Daten gefunden! Reloade Sprache!'); //Wenn nichts aktuelles vorhanden ist, lade Sprache\n\n          this.language(lang).subscribe(data => {\n            //console.log('--------');\n            //console.log(data);\n            //console.log('--------');\n            sessionStorage.setItem('language', lang);\n            localStorage.setItem(lang + '_changed', data['changed']);\n            var count = data['count'];\n\n            for (let i = 0; i < count; i++) {\n              var tmp = data[i];\n              var name = tmp['title_element'] + '_' + lang;\n              localStorage.setItem(name, JSON.stringify(tmp));\n            }\n\n            this.startupChain2(4);\n          });\n        }\n      }\n\n      if (step == 4) {\n        console.log('Lade Sprachen');\n        var reload = true;\n\n        if (localStorage.getItem('sprachen')) {\n          var sprachen = JSON.parse(localStorage.getItem('sprachen'));\n          var local_changed = parseInt(sprachen['changed']);\n          var endpunkt = JSON.parse(localStorage.getItem('languages_end'));\n          var endpunkt_changed = parseInt(endpunkt['changed']);\n\n          if (local_changed >= endpunkt_changed) {\n            reload = false;\n            this.startupChain2(5);\n          }\n        }\n\n        if (reload) {\n          console.log('Neuere Daten gefunden! Reloade Sprachen!'); //Wenn nichts aktuelles vorhanden ist, lade Sprachen\n\n          this.getEndpunkt('languages').subscribe(data => {\n            //console.log('--------');\n            //console.log(data);\n            //console.log('--------');\n            localStorage.setItem('sprachen', JSON.stringify(data));\n            this.startupChain2(5);\n          });\n        }\n      }\n\n      if (step == 5) {\n        console.log('Lade Kategorien');\n        var reload = true;\n\n        if (localStorage.getItem('kategorie')) {\n          var kategorien = JSON.parse(localStorage.getItem('kategorie'));\n          var local_changed = parseInt(kategorien['changed']);\n          var endpunkt = JSON.parse(localStorage.getItem('kategorie_end'));\n          var endpunkt_changed = parseInt(endpunkt['changed']);\n\n          if (local_changed >= endpunkt_changed) {\n            reload = false;\n            this.startupChain2(6);\n          }\n        }\n\n        if (reload) {\n          console.log('Neuere Daten gefunden! Reloade Kategorien!'); //Wenn nichts aktuelles vorhanden ist, lade Sprachen\n\n          this.getEndpunkt('kategorie').subscribe(data => {\n            //localStorage.setItem('kategorie', JSON.stringify(data));\n            //console.log('--------');\n            //console.log(data['toastbrot']);\n            //console.log('--------');\n            var kategorien2 = Array();\n            var kats = data['toastbrot'];\n            var main = kats['Hauptkategorie'];\n            var sub = kats['Subkategorie'];\n            var count = main['count'];\n\n            for (let i = 0; i < count; i++) {\n              var neu = new Hauptkategorie(main[i]['title'], main[i]['link'], main[i]['slug']);\n              var rel = sub[main[i]['slug']];\n              var count2 = rel['count']; //console.log(main[i]['slug'] + ': ' + count2);\n\n              for (let j = 0; j < count2; j++) {\n                //console.log(rel[j]['title'] + ': ' + j);\n                var neusub = new Subkategorie(rel[j]['title'], rel[j]['link'], rel[j]['slug']);\n                neu.add(neusub);\n              }\n\n              kategorien2.push(neu);\n            }\n\n            localStorage.setItem('kategorie', JSON.stringify(kategorien2));\n            this.startupChain2(6);\n          });\n        }\n      } //Wizard\n\n\n      if (step == 6) {\n        console.log('Lade Wizard');\n        var reload = true;\n\n        if (localStorage.getItem('wizard_raw')) {\n          var wizard = JSON.parse(localStorage.getItem('wizard_raw'));\n          var local_changed = parseInt(wizard['changed']);\n          var endpunkt = JSON.parse(localStorage.getItem('wizard_end'));\n          var endpunkt_changed = parseInt(endpunkt['changed']);\n\n          if (local_changed >= endpunkt_changed) {\n            reload = false;\n            this.constructWizard(wizard);\n            this.followUp2();\n          }\n        }\n\n        if (reload) {\n          console.log('Neuere Daten gefunden! Reloade Wizard!'); //Wenn nichts aktuelles vorhanden ist, lade Sprachen\n\n          this.getEndpunkt('wizard').subscribe(data => {\n            //localStorage.setItem('kategorie', JSON.stringify(data));\n            //console.log('--------');\n            //console.log(data);\n            //console.log('--------');\n            localStorage.setItem('wizard_raw', JSON.stringify(data));\n            var wizard = JSON.parse(localStorage.getItem('wizard_raw'));\n            this.constructWizard(wizard);\n            this.followUp2();\n          });\n        }\n      }\n    }\n\n    constructWizard(input) {\n      //Eingabe ist der String aus der JSON Datei\n      var result = Array(); // console.log('1');\n\n      var count = input['count'];\n\n      for (let i = 0; i < count; i++) {\n        var single = input[i];\n        var id = single['id'];\n        var fragen = Array(); //console.log('2');\n\n        var fragen_count = single['fragen']['count'];\n\n        for (let j = 0; j < fragen_count; j++) {\n          var frage = single['fragen'][j]['frage'];\n          var inputs_raw = single['fragen'][j]['input'];\n          var conditions_raw = single['fragen'][j]['conditions']; //console.log('3');\n\n          var cond1 = single['fragen'][j]['conditions']['count']; //Anzahl der Möglichkeiten\n\n          var conditions = Array();\n\n          for (let j2 = 0; j2 < cond1; j2++) {\n            var route = single['fragen'][j]['conditions'][j2];\n            var level_value = Array(); //console.log(route);\n\n            var id2 = single['fragen'][j]['conditions'][j2]['count'];\n\n            for (let j25 = 0; j25 < id2; j25++) {\n              //Jeder Wert gibt die Schicht an, in der diese Antwort gegeben sein muss.\n              //console.log(route[j25]);\n              var stage_value = Array(); //console.log(route[j25]);\n\n              stage_value.push(route[j25]['count']);\n\n              if (route[j25]['count'] > 0) {\n                for (let j3 = 0; j3 < route[j25]['count']; j3++) {\n                  stage_value.push(route[j25][j3]);\n                }\n              }\n\n              level_value.push(stage_value);\n            }\n\n            conditions.push(level_value);\n          } //console.log('5');\n\n\n          var inputs_count = inputs_raw['count'];\n          var inputs = Array();\n\n          for (let k = 0; k < inputs_count; k++) {\n            var type = inputs_raw[k]['type'];\n            var name = inputs_raw[k]['name'];\n            var options = Array();\n            var options_count = inputs_raw[k]['options']['count'];\n\n            if (options_count > 0) {\n              for (let k2 = 0; k2 < options_count; k2++) {\n                options.push(inputs_raw[k]['options'][k2]);\n              }\n            }\n\n            var required = inputs_raw[k]['required'];\n            var disallowed = Array();\n            var disallowed_count = inputs_raw[k]['disallowed']['count'];\n\n            if (disallowed_count > 0) {\n              for (let k2 = 0; k2 < disallowed_count; k2++) {\n                disallowed.push(inputs_raw[k]['disallowed'][k2]);\n              }\n            }\n\n            inputs.push(new Input(type, options, required, disallowed, name));\n          }\n\n          fragen.push(new Fragen(frage, inputs, conditions));\n        }\n\n        var erklaerung = [single['erklaerung'], single['erklaerung_title'], single['erklaerung_link']];\n        result.push(new WizardStage(fragen, erklaerung[0], erklaerung[1], erklaerung[2], id));\n      }\n\n      localStorage.setItem('wizard', JSON.stringify(result)); //console.log(result);\n    }\n\n    followUp() {\n      console.log('Clean Up'); //Endpunkte sind geladen\n      //Menü ist geladen\n      //Labels sind geladen\n      //Sprachen sind geladen\n      //Refresh Menue\n\n      setupDOM(this.router); //this.router.navigate(['startseite'], {});\n    }\n\n    followUp2() {\n      console.log('Clean Up'); //Endpunkte sind geladen\n      //Menü ist geladen\n      //Labels sind geladen\n      //Sprachen sind geladen\n      //Refresh Menue\n\n      setupDOM(this.router);\n      this.startupChain(1); //this.router.navigate(['startseite'], {});\n    }\n\n    sub(x) {\n      console.log('Inner Api:' + x);\n\n      if (sessionStorage.getItem('DEV') == 'true') {\n        sub(x);\n      }\n    }\n\n    langswitch(lang) {\n      langswitch(lang);\n    }\n\n    innerRouting(route) {\n      this.router.navigate(['/', route], {});\n    }\n\n    loadMenue(router) {\n      loadMenue(router);\n    }\n\n    setupDOM(router) {\n      if (sessionStorage.getItem('DEV')) {\n        sessionStorage.setItem('DEV', 'true');\n      } else {\n        sessionStorage.setItem('DEV', 'false');\n      }\n\n      setupDOM(router);\n    }\n\n    reconstructMiethistorie() {\n      console.log('reconstructMiethistorie');\n      var aktuell = JSON.parse(sessionStorage.getItem('aktuelle_miethistorie')); //console.log(aktuell);\n\n      var count1 = aktuell['count'];\n      var mieten_aktuell = Array();\n\n      for (let i = 0; i < count1; i++) {\n        var miete = aktuell[i];\n        var rechnungen_liste = Array();\n        var rechnungs_count1 = miete['rechnungsids']['count'];\n\n        for (let j = 0; j < rechnungs_count1; j++) {\n          var Rechnung = new Rechnungen(miete['rechnungsids'][j]['id']); //console.log(Rechnung);\n\n          rechnungen_liste.push(Rechnung);\n        }\n\n        mieten_aktuell.push(new Mieten(miete['enddatum'], miete['geraeteid'], miete['id'], miete['lieferadresse'], miete['produktid'], miete['produktname'], miete['standortgerken'], miete['startdatum'], rechnungen_liste, miete['bild'], miete['slug'], miete['abholung'], miete['bedienung'], new Standort(miete['standort']['name'], miete['standort']['strasse'], miete['standort']['hausnummer'], miete['standort']['plz'], miete['standort']['stadt'], miete['standort']['land'])));\n      }\n\n      var vergangen = JSON.parse(sessionStorage.getItem('vergangene_miethistorie')); //console.log(vergangen);\n\n      var count2 = vergangen['count'];\n      var mieten_vergangen = Array();\n\n      for (let i = 0; i < count2; i++) {\n        var miete = vergangen[i];\n        var rechnungen_liste2 = Array();\n        var rechnungs_count2 = miete['rechnungsids']['count'];\n\n        for (let j = 0; j < rechnungs_count2; j++) {\n          rechnungen_liste2.push(new Rechnungen(miete['rechnungsids'][j]['id']));\n        }\n\n        mieten_vergangen.push(new Mieten(miete['enddatum'], miete['geraeteid'], miete['id'], miete['lieferadresse'], miete['produktid'], miete['produktname'], miete['standortgerken'], miete['startdatum'], rechnungen_liste2, miete['bild'], miete['slug'], miete['abholung'], miete['bedienung'], new Standort(miete['standort']['name'], miete['standort']['strasse'], miete['standort']['hausnummer'], miete['standort']['plz'], miete['standort']['stadt'], miete['standort']['land'])));\n      }\n\n      var result = new Miethistorie(mieten_aktuell, mieten_vergangen); //console.log(result);\n\n      console.log('done reconstruction');\n      return result;\n    }\n\n    makeid(integ) {\n      return makeid(integ);\n    }\n\n    constructBewertung(data, mode) {\n      var div = document.createElement('div');\n      div.classList.add('rating-stars');\n      div.classList.add('text-center');\n      var ul = document.createElement('ul');\n      ul.id = 'stars';\n      var rel = data[mode];\n\n      for (let i = 0; i < 5; i++) {\n        var li = document.createElement('li');\n        li.classList.add('star');\n\n        if (i == 0) {\n          li.title = 'Poor';\n        }\n\n        if (i == 1) {\n          li.title = 'Fair';\n        }\n\n        if (i == 2) {\n          li.title = 'Good';\n        }\n\n        if (i == 3) {\n          li.title = 'Excellent';\n        }\n\n        if (i == 4) {\n          li.title = 'WOW!!!';\n        }\n\n        li.setAttribute('data-value', (i + 1).toString());\n\n        if (i < rel) {\n          li.classList.add('selected');\n        }\n\n        var i_ele = document.createElement('i');\n        i_ele.classList.add('fa');\n        i_ele.classList.add('fa-star');\n        i_ele.classList.add('fa-fw');\n        li.appendChild(i_ele);\n        ul.appendChild(li);\n      }\n\n      div.appendChild(ul);\n      return div;\n    }\n\n    constructHTML(mode, data_raw) {\n      //console.log('constructHTML');\n      //Links bitte nachreichen\n      if (mode == 'easycopy') {\n        var div = document.createElement('div');\n        return div;\n      }\n\n      if (mode == 'bewertung') {\n        var hash = this.makeid(7);\n        var div = document.createElement('div');\n        div.classList.add('Bewertung-Single');\n        var modal = document.createElement('div');\n        modal.classList.add('modal');\n        modal.id = 'id_modal_comment_' + hash;\n        var h3 = document.createElement('h3');\n        h3.innerHTML = 'Bewertung von ' + data_raw['name'] + ' vom ' + data_raw['date'].replace('-', '.').replace('-', '.');\n        modal.appendChild(h3);\n        var form = document.createElement('form');\n        var h6 = document.createElement('h6');\n        h6.innerHTML = 'Service';\n        modal.appendChild(h6);\n        var service = this.constructBewertung(data_raw, 'service');\n        modal.appendChild(service);\n        var h6 = document.createElement('h6');\n        h6.innerHTML = 'Funktionalität';\n        modal.appendChild(h6);\n        var funktionalitat = this.constructBewertung(data_raw, 'funktionalitat');\n        modal.appendChild(funktionalitat);\n        var h6 = document.createElement('h6');\n        h6.innerHTML = 'Sauberkeit';\n        modal.appendChild(h6);\n        var sauberkeit = this.constructBewertung(data_raw, 'sauberkeit');\n        modal.appendChild(sauberkeit);\n        var h6 = document.createElement('h6');\n        h6.innerHTML = 'Pünktliche Lieferung';\n        modal.appendChild(h6);\n        var punktlichkeit = this.constructBewertung(data_raw, 'punktlichkeit');\n        modal.appendChild(punktlichkeit);\n        var h6 = document.createElement('h6');\n        h6.innerHTML = 'Bestellprozess';\n        modal.appendChild(h6);\n        var bestellprozess = this.constructBewertung(data_raw, 'bestellprozess');\n        modal.appendChild(bestellprozess);\n        var label = document.createElement('label');\n        label.innerHTML = 'Kommentar:';\n        modal.appendChild(label);\n        var comment = document.createElement('p');\n        comment.innerHTML = data_raw['comment'];\n        modal.appendChild(comment);\n        var bewertung = document.createElement('div');\n        bewertung.classList.add('product');\n        bewertung.setAttribute('data-hash', hash);\n        var durchschnitt = (parseInt(data_raw['service']) + parseInt(data_raw['funktionalitat']) + parseInt(data_raw['sauberkeit']) + parseInt(data_raw['punktlichkeit']) + parseInt(data_raw['bestellprozess'])) / 5;\n        var durchschnitta = durchschnitt;\n        var durchschnittb = durchschnitt;\n        var durchschnittc = durchschnitta.toFixed(2);\n        var durchschnittd = durchschnittb.toFixed(0);\n        console.log('Durchschnitt: ' + durchschnittc + ' , ' + durchschnittd);\n        var result = document.createElement('div');\n        result.innerHTML = '<p class=\"stars stars-' + durchschnittd + '\">' + durchschnittc + '/5</p><br><p><em>' + data_raw['name'] + ' schrieb am ' + data_raw['date'].replace('-', '.').replace('-', '.') + ':</em><br/>' + data_raw['comment'] + '</p>';\n        bewertung.appendChild(result);\n        /*\n        var div4 = document.createElement('div');\n        div4.classList.add('product-actions');\n        div4.innerHTML +=\n          '<a data-fancybox data-src=\"#id_modal_comment_' +\n          hash +\n          \"' data-options='{\" +\n          \"'touch' : false\" +\n          \"}' href='javascript:void(0);' class='btn'>Details</a>\";\n               bewertung.appendChild(div4);\n        */\n\n        div.addEventListener('click', function (event) {\n          $.fancybox.open({\n            touch: false,\n            src: '#id_modal_comment_' + hash,\n            type: 'inline',\n            opts: {}\n          });\n        });\n        div.appendChild(modal);\n        div.appendChild(bewertung);\n        return div;\n      }\n\n      if (mode == 'empfalt') {\n        /*\n        <div class=\"product\">\n        <div class=\"product-image\">\n          <img src=\"images/_temp/product.jpg\">\n        </div>\n        <div class=\"product-text\">\n          <p><strong>Lorem ipsum dolor sit amet, consetetur sadipscing</strong><br>\n          Sed diam nonumy eirmod tempor invidunt ut labore et dolore</p>\n        </div>\n        <div class=\"product-actions\">\n          <a href=\"#\" class=\"btn\">Details</a>\n          <a href=\"#\" class=\"btn\">Erneut mieten</a>\n        </div>\n        </div>\n        */\n        var hash = this.makeid(7);\n        var div = document.createElement('div');\n        div.classList.add('product');\n        div.setAttribute('data-hash', hash);\n        var div2 = document.createElement('div');\n        div2.classList.add('product-image');\n        console.log(data_raw);\n        div2.innerHTML = '<img src=\"' + data_raw['bild'].split('|')[0] + '\">';\n        div.appendChild(div2);\n        var div3 = document.createElement('div');\n\n        if (!data_raw['beschreibung']) {\n          data_raw['beschreibung'] = '';\n        }\n\n        div3.innerHTML = '<p><strong>' + data_raw['produkt'] + '</strong><br>' + data_raw['beschreibung'] + '</p>';\n        div.appendChild(div3);\n        var div4 = document.createElement('div');\n        div4.classList.add('product-actions');\n        div4.innerHTML += '<a id=\"a' + hash + '\" class=\"btn\">Details</a>';\n        div4.innerHTML += '<a id=\"b' + hash + '\" class=\"btn\">Wechseln zu diesem Produkt</a>';\n        div.appendChild(div4);\n        return div;\n      }\n\n      if (mode == 'orderstate') {\n        var open = true;\n        var days = 1;\n        var zeit = JSON.parse(sessionStorage.getItem('ZEIT'));\n        console.log(zeit);\n\n        if (zeit[7]) {\n          var days = parseInt(zeit[7]);\n          open = false;\n        }\n\n        console.log('Tage: ' + days);\n        var data70 = data_raw;\n        console.log(data70);\n        var index = parseInt(data70['id']) + 1;\n        var div = document.createElement('div');\n        var h6 = document.createElement('h6');\n        h6.innerHTML = 'Position ' + index;\n        div.appendChild(h6);\n        var table = document.createElement('table'); //Produkt\n\n        var tr = document.createElement('tr');\n        var td1 = document.createElement('td'); //console.log(data70[0][0][\"produkt\"]);\n\n        td1.innerHTML = data70['produkt']['name'];\n        tr.appendChild(td1);\n        var td2 = document.createElement('td');\n\n        if (!data70['produkt']['preis']) {\n          data70['produkt']['preis'] = '0';\n        }\n\n        var preis = parseFloat(data70['produkt']['preis']);\n        var anzahl = parseInt(data70['produkt']['anzahl']);\n        td2.innerHTML = (days * anzahl * preis).toFixed(2) + '€';\n        tr.appendChild(td2);\n        table.appendChild(tr);\n        var tr_vers = document.createElement('tr');\n        var td1_vers = document.createElement('td'); //console.log(data70[0][0][\"produkt\"]);\n\n        td1_vers.innerHTML = data70['versicherung']['title'];\n        tr_vers.appendChild(td1_vers);\n        var td2_vers = document.createElement('td');\n        var preis = parseFloat(data70['versicherung']['preis']);\n        td2_vers.innerHTML = preis.toFixed(2) + '€';\n        tr_vers.appendChild(td2_vers);\n        table.appendChild(tr_vers);\n\n        if (data70['zubehoer']) {\n          for (let i = 0; i < data70['zubehoer'].length; i++) {\n            var tr2 = document.createElement('tr');\n            var td1b = document.createElement('td');\n            td1b.innerHTML = data70['zubehoer'][i]['name'];\n            var td2b = document.createElement('td');\n            var preis = parseFloat(data70['zubehoer'][i]['preis']);\n            var anzahl = parseInt(data70['zubehoer'][i]['anzahl']);\n            td2b.innerHTML = (days * anzahl * preis).toFixed(2) + '€';\n            tr2.appendChild(td1b);\n            tr2.appendChild(td2b);\n            table.appendChild(tr2);\n          }\n        }\n\n        if (data70['bundles']) {\n          for (let i = 0; i < data70['bundles'].length; i++) {\n            var tr2 = document.createElement('tr');\n            var td1b = document.createElement('td');\n            var parts = data70['bundles'][i]['name'].split('|xx|');\n\n            if (parts[0] == data70['produkt']['name']) {\n              data70['bundles'][i]['name'] = parts[1];\n            } else {\n              data70['bundles'][i]['name'] = parts[0];\n            }\n\n            td1b.innerHTML = 'Bundle: ' + data70['bundles'][i]['name'];\n            var td2b = document.createElement('td');\n\n            if (!data70['bundles'][i]['preis']) {\n              data70['bundles'][i]['preis'] = '0';\n            }\n\n            var preis = parseFloat(data70['bundles'][i]['preis']);\n            var anzahl = parseInt(data70['bundles'][i]['anzahl']);\n            td2b.innerHTML = (days * anzahl * preis).toFixed(2) + '€';\n            tr2.appendChild(td1b);\n            tr2.appendChild(td2b);\n            table.appendChild(tr2);\n            var tr3 = document.createElement('tr');\n            var td1c = document.createElement('td');\n            td1c.innerHTML = data70['bundles'][i]['title_versicherung'];\n            var preis = parseFloat(data70['bundles'][i]['preis_versicherung']);\n            var td2c = document.createElement('td');\n            td2c.innerHTML = preis.toFixed(2) + '€';\n            tr3.appendChild(td1c);\n            tr3.appendChild(td2c);\n            table.appendChild(tr3);\n          }\n        }\n\n        var tr = document.createElement('tr');\n        tr.classList.add('sum');\n        var td1 = document.createElement('td');\n        td1.innerHTML = 'Zwischensumme';\n        var td2 = document.createElement('td');\n        td2.innerHTML = (days * parseFloat(data70['gesamtpreis'])).toFixed(2) + '€';\n        tr.appendChild(td1);\n        tr.appendChild(td2);\n        table.appendChild(tr);\n        div.appendChild(table);\n        return div;\n      }\n\n      if (mode == 'faq') {\n        var hash = this.makeid(7);\n        var data = data_raw;\n        var div1 = document.createElement('div');\n        div1.classList.add('product');\n        div1.setAttribute('data-hash', hash); //Bild\n\n        var div2 = document.createElement('div');\n        div2.classList.add('product-image');\n        var img = document.createElement('img');\n        img.src = data.bild;\n        div2.appendChild(img);\n        div1.appendChild(div2); //Text\n\n        var div3 = document.createElement('div');\n        div3.classList.add('product-text');\n        var p = document.createElement('p');\n        var miettext = '';\n        var date = new Date();\n        var timestamp = date.getTime();\n        var date2 = new Date(data.enddatum);\n        var timestamp2 = date2.getTime();\n        var newdate = data.enddatum.split('-')[2] + '.' + data.enddatum.split('-')[1] + '.' + data.enddatum.split('-')[0];\n\n        if (timestamp < timestamp2) {\n          miettext = 'gemietet bis ' + newdate;\n        } else {\n          miettext = 'zuletzt gemietet ' + newdate;\n        }\n\n        p.innerHTML = '<strong>' + data.produktname + '</strong><br />' + miettext;\n        div3.appendChild(p);\n        div1.appendChild(div3); //Links\n\n        var div4 = document.createElement('div');\n        div4.classList.add('product-actions');\n        var a1 = document.createElement('a');\n        a1.classList.add('btn');\n        a1.innerHTML = 'Details';\n        a1.id = hash;\n        a1.setAttribute('data-slug', data.slug);\n        div4.appendChild(a1);\n        div1.appendChild(div4);\n        return div1;\n      }\n\n      if (mode == 'standortm') {\n        var div = document.createElement('div');\n        div.classList.add('radio-wrapper');\n        var label = document.createElement('label');\n        label.innerHTML = data_raw['title'] + '<br />';\n        label.innerHTML += data_raw['strasse'] + '<br />';\n        label.innerHTML += data_raw['plz'] + ' ' + data_raw['stadt'] + '<br />';\n        label.innerHTML += 'Entfernung zur gewählten PLZ: ' + data_raw['distance'] + ' km';\n        label.innerHTML += '<input type=\"radio\" name=\"filiale\" id=\"' + data_raw['id'] + '\" value=\"1\"/>';\n        label.innerHTML += '<span class=\"checkmark checkmark-radio\"></span>';\n        div.appendChild(label);\n        return div;\n      }\n\n      if (mode == 'calendar') {\n        //console.log(data_raw);\n        var a = document.createElement('a');\n        a.classList.add('day');\n        a.id = data_raw['id'];\n\n        if (data_raw['status'] == 'start' || data_raw['status'] == 'ende') {\n          a.classList.add('visible');\n        } else {\n          if (data_raw['status'] == 'min') {\n            a.classList.add('min');\n            a.classList.add('active');\n          }\n        }\n\n        var span1 = document.createElement('span');\n        span1.classList.add('flag-wrapper');\n        span1.innerHTML = '<span class=\"flag\">' + data_raw['value'] + '</span>';\n        var span2 = document.createElement('span');\n        span2.classList.add('balken');\n        var screen = window.innerHeight * 0.3; //console.log('Screen: ' + screen);\n\n        var min = parseFloat(data_raw['min']);\n        var max = parseFloat(data_raw['max']);\n        var value = parseFloat(data_raw['value']); //min->0.3\n\n        var max_height = screen;\n        var height = screen / max; //console.log('Height 1: ' + height);\n\n        height = height * value;\n        var height_int = parseInt(height.toString()); //console.log('Height 2: ' + height_int);\n\n        span2.setAttribute('style', 'height:' + height_int + 'px;');\n        var span3 = document.createElement('span');\n        span3.classList.add('info');\n        var day = data_raw['day'];\n        day = day.replace('Monday', 'Mo');\n        day = day.replace('Tuesday', 'Di');\n        day = day.replace('Wednesday', 'Mi');\n        day = day.replace('Thursday', 'Do');\n        day = day.replace('Friday', 'Fr');\n        day = day.replace('Saturday', 'Sa');\n        day = day.replace('Sunday', 'So');\n        span3.innerHTML = day + '<br />' + data_raw['day2'];\n        a.appendChild(span1);\n        a.appendChild(span2);\n        a.appendChild(span3);\n        return a;\n      }\n\n      if (mode == 'ProduktOverview1') {\n        var div = document.createElement('div');\n        div.classList.add('product');\n        var div2 = document.createElement('div');\n        div2.classList.add('product-image');\n        var img = document.createElement('img');\n        img.src = data_raw['bild'].split('|')[0];\n        div2.appendChild(img);\n\n        if (!data_raw['beschreibung']) {\n          data_raw['beschreibung'] = '';\n        }\n\n        var div3 = document.createElement('div');\n        div3.classList.add('product-text');\n        div3.innerHTML = '<p><strong>' + data_raw['produkt'] + '</strong><br>' + data_raw['beschreibung'] + '</p>';\n        var div4 = document.createElement('div');\n        div4.classList.add('product-actions');\n        var h4 = document.createElement('h4');\n\n        if (!data_raw['preis']) {\n          data_raw['preis'] = '0|0';\n        }\n\n        h4.innerHTML = '';\n        var a = document.createElement('a');\n        a.id = 'produkt' + data_raw['uid'] + '-' + data_raw['hauptkategorie'];\n        a.classList.add('btn');\n        a.classList.add('produktlink');\n        a.setAttribute('data-link', data_raw['slug']); //a.href = '/mietprozess/standort/' + data_raw['slug'];\n\n        a.innerHTML = 'Auswählen';\n        var router = this.router;\n        a.addEventListener('click', function (event) {\n          var dest = '/mietprozess/standorte/';\n\n          if (sessionStorage.getItem('STANDORT') && sessionStorage.getItem('STANDORT') != 'undefined') {\n            console.log('STANDORT GEFUNDEN');\n            dest = '/mietprozess/zeit/';\n          }\n\n          if (sessionStorage.getItem('ZEIT')) {\n            console.log('ZEIT GEFUNDEN');\n            dest = '/mietprozess/empfehlung/';\n          }\n\n          router.navigate([dest, data_raw['slug']], {});\n          event.preventDefault();\n        });\n        var a2 = document.createElement('a');\n        a2.classList.add('btn'); //a.href = '/mietprozess/standort/' + data_raw['slug'];\n\n        a2.innerHTML = 'Details';\n        a2.addEventListener('click', function (event) {\n          router.navigate(['produktdetailseite/' + data_raw['slug']], {});\n        });\n        div4.appendChild(h4);\n        div4.appendChild(a);\n        div4.appendChild(a2);\n        div.appendChild(div2);\n        div.appendChild(div3);\n        div.appendChild(div4);\n        return div;\n      }\n\n      if (mode == 'ProduktOverview2') {\n        var div = document.createElement('div');\n        div.classList.add('product');\n        var div2 = document.createElement('div');\n        div2.classList.add('product-image');\n        var img = document.createElement('img');\n        img.src = data_raw['bild'].split('|')[0];\n        div2.appendChild(img);\n\n        if (!data_raw['beschreibung']) {\n          data_raw['beschreibung'] = '';\n        }\n\n        var div3 = document.createElement('div');\n        div3.classList.add('product-text');\n        div3.innerHTML = '<p><strong>' + data_raw['produkt'] + '</strong><br>' + data_raw['beschreibung'] + '</p>';\n        var div4 = document.createElement('div');\n        div4.classList.add('product-actions');\n        var h4 = document.createElement('h4');\n\n        if (!data_raw['preis']) {\n          data_raw['preis'] = '0|0';\n        }\n\n        h4.innerHTML = 'Ab ' + data_raw['preis'].split('|')[0] + ',-€/Tag';\n        var a = document.createElement('a');\n        a.id = 'produkt' + data_raw['uid'] + '-' + data_raw['hauptkategorie'];\n        a.classList.add('btn');\n        a.classList.add('produktlink');\n        a.setAttribute('data-link', data_raw['slug']); //a.href = '/mietprozess/standort/' + data_raw['slug'];\n\n        a.innerHTML = 'Auswählen';\n        var router = this.router;\n        var env3 = this;\n        a.addEventListener('click', function (event) {\n          var url = window.location;\n          let currentUrl = router.url;\n          console.log('URL(Java): ' + url + ', URL(Angular): ' + currentUrl);\n          var url = window.location;\n          var lg = '&login=false';\n\n          if (sessionStorage.getItem('Usertoken')) {\n            lg = '&login=true';\n          } //console.log(url.href);\n          //console.log(url.pathname);\n\n\n          var link = url.href;\n\n          if (url.pathname != '/') {\n            link = url.href.split(url.pathname)[0];\n          }\n\n          if (url.pathname.includes('geraete-mieten')) {\n            link += '/geraete-mieten/mietprozess/auswahl/' + data_raw['slug'];\n            console.log('Final Link');\n            window.location.href = link;\n          } else {\n            router.navigate(['mietprozess/auswahl', data_raw['slug']], {});\n          } //env3.reload();\n          //event.preventDefault();\n\n        });\n        var a2 = document.createElement('a');\n        a2.classList.add('btn'); //a.href = '/mietprozess/standort/' + data_raw['slug'];\n\n        a2.innerHTML = 'Details';\n        a2.addEventListener('click', function (event) {\n          router.navigate(['produktdetailseite/' + data_raw['slug']], {});\n        });\n        div4.appendChild(h4);\n        div4.appendChild(a);\n        div4.appendChild(a2);\n        div.appendChild(div2);\n        div.appendChild(div3);\n        div.appendChild(div4);\n        return div;\n      }\n\n      if (mode == 'ProduktAdditional1') {\n        if (!data_raw['beschreibung']) {\n          data_raw['beschreibung'] = '';\n        }\n\n        var hash = makeid(10);\n        var hash2 = makeid(10);\n        var div = document.createElement('div');\n        div.classList.add('product');\n        div.setAttribute('data-hash', data_raw['id']);\n        div.setAttribute('data-hash2', hash2);\n        div.setAttribute('data-hash7', data_raw['slug']);\n        div.id = 'b' + data_raw['id'] + 'z';\n        var div2 = document.createElement('div');\n        div2.classList.add('product-image');\n        var img = document.createElement('img');\n        img.src = data_raw['bild'].split('|')[0];\n        div2.appendChild(img);\n        div.appendChild(div2);\n        var div3 = document.createElement('div');\n        div3.classList.add('product-text');\n        div3.innerHTML = '<p><strong>' + data_raw['produkt'] + '</strong><br /></p>';\n        var h4 = document.createElement('h4');\n        h4.id = data_raw['id'];\n\n        if (!data_raw['preis']) {\n          data_raw['preis'] = '0|0';\n        }\n\n        h4.innerHTML = 'Ab ' + data_raw['preis'].split('|')[0] + '€/Tag';\n        div3.appendChild(h4);\n        div.appendChild(div3);\n        var div4 = document.createElement('div');\n        div4.classList.add('product-actions');\n        div4.setAttribute('style', 'width:100%;');\n        var a7 = document.createElement('a');\n        a7.classList.add('btn');\n        a7.classList.add('btn-outline');\n        a7.innerHTML = 'Details';\n        a7.id = hash2;\n        div4.appendChild(a7);\n        var select = document.createElement('select');\n        select.id = 'b' + data_raw['id'];\n        select.classList.add('formularinput');\n        select.setAttribute('data-produkt', data_raw['produkt']);\n        select.innerHTML = '<option>Anzahl wählen...</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>';\n        div4.appendChild(select);\n        div.appendChild(div4);\n        return div;\n      }\n\n      if (mode == 'ProduktAdditional2') {\n        var hash = makeid(10);\n        var div = document.createElement('div');\n        div.classList.add('radio-checkbox-wrapper');\n        div.setAttribute('data-hash', data_raw['id']);\n        var label = document.createElement('label');\n        label.classList.add('with-price');\n        data_raw['text'] = data_raw['text'].replace('', '€');\n        label.innerHTML = data_raw['text'];\n        var input = document.createElement('input');\n        input.classList.add('formularinput');\n        input.classList.add('versicherung1');\n        input.setAttribute('data-wert', data_raw['preis']);\n        input.type = 'radio';\n        input.value = 'OK'; //input.name = 'xxx';\n\n        input.id = data_raw['id'];\n        /*\n        if(label.innerHTML.includes(\"1000,00€\")){\n          console.log(\"found\");\n           input.checked=true;\n        }\n        */\n\n        var span1 = document.createElement('span');\n        span1.classList.add('checkmark');\n        span1.classList.add('checkmark-checkbox');\n        var span2 = document.createElement('span');\n        span2.classList.add('price');\n        span2.innerHTML = data_raw['preis'] + '€';\n        label.appendChild(input);\n        label.appendChild(span1);\n        label.appendChild(span2);\n        div.appendChild(label);\n        div.innerHTML += '<div style=\"clear:both;\"><div></div></div>';\n        return div;\n      }\n\n      if (mode == 'Miethistorie') {\n        var data = data_raw[1];\n        var router = data_raw[0];\n        var data_beta = data_raw[2];\n        var env = data_raw[3];\n        console.log(data_beta);\n        var div1 = document.createElement('div');\n        div1.classList.add('product'); //Bild\n\n        var div2 = document.createElement('div');\n        div2.classList.add('product-image');\n        var img = document.createElement('img');\n        img.src = data.bild;\n        div2.appendChild(img);\n        div1.appendChild(div2); //Text\n\n        var div3 = document.createElement('div');\n        div3.classList.add('product-text');\n        var p = document.createElement('p');\n        var miettext = '';\n        var date = new Date();\n        var timestamp = date.getTime();\n        var date2 = new Date(data.enddatum);\n        console.log('DATEN');\n        console.log(date);\n        console.log(date2);\n        var timestamp2 = date2.getTime();\n        var newdate = data.enddatum.split('-')[2] + '.' + data.enddatum.split('-')[1] + '.' + data.enddatum.split('-')[0];\n\n        if (timestamp < timestamp2) {\n          miettext = 'gemietet bis ' + newdate;\n        } else {\n          miettext = 'zuletzt gemietet ' + newdate;\n        }\n\n        console.log(data_beta);\n\n        if (data_beta['offen'] == true && data_beta['enddatum'] == '') {\n          miettext = 'offenes Mietende';\n        }\n\n        p.innerHTML = '<strong>' + data.produktname + '</strong><br />' + miettext;\n        div3.appendChild(p);\n        div1.appendChild(div3); //Links\n\n        var div4 = document.createElement('div');\n        div4.classList.add('product-actions');\n        var a1 = document.createElement('a');\n        a1.classList.add('btn');\n        a1.innerHTML = 'Details';\n        a1.id = makeid(7);\n        a1.addEventListener('click', function (event) {\n          router.navigate(['/produktdetailseite', data.slug], {});\n          event.preventDefault();\n        });\n        var a2 = document.createElement('a');\n        a2.classList.add('btn');\n        a2.innerHTML = 'Miete verlängern';\n\n        if (timestamp >= timestamp2) {\n          a2.innerHTML = 'Erneut mieten';\n        }\n\n        a2.id = makeid(7);\n        a2.setAttribute('data-produkt-slug', data_beta['slug']);\n        a2.setAttribute('data-produkt-produkt', data_beta['produkt']);\n        a2.setAttribute('data-ende', data_beta['offen']);\n        a2.addEventListener('click', function (event) {\n          //router.navigate(['/mietprozess', 'miethistorie', data.slug], {});\n          if (this.innerHTML == 'Miete verlängern') {\n            var offen = this.getAttribute('data-ende');\n            var slug = this.getAttribute('data-produkt-slug');\n            console.log(offen);\n            console.log(slug);\n\n            if (offen == 'true') {\n              console.log('Modal öffnen mit Denial');\n              document.getElementById('miethistorie_form').style.display = 'none';\n              document.getElementById('nomore').style.display = 'block';\n            } else {\n              console.log('Modal öffnen mit Zeitauswahl');\n              document.getElementById('miethistorie_form').style.display = 'block';\n              document.getElementById('nomore').style.display = 'none';\n            } //scroll(0, 0);\n\n\n            $.fancybox.open({\n              touch: false,\n              src: '#id_modal_miethistorie',\n              type: 'inline',\n              opts: {\n                touch: false\n              }\n            });\n          }\n\n          if (this.innerHTML == 'Erneut mieten') {\n            var offen = this.getAttribute('data-ende');\n            var slug = this.getAttribute('data-produkt-slug');\n            var produkt = this.getAttribute('data-produkt-produkt');\n            console.log(offen);\n            console.log(slug);\n            console.log('Weiterleitung zu Zeitauswahl');\n            var dest = '/mietprozess/standorte/';\n\n            if (sessionStorage.getItem('STANDORT') && sessionStorage.getItem('STANDORT') != 'undefined') {\n              console.log('STANDORT GEFUNDEN');\n              dest = '/mietprozess/zeit/';\n            }\n\n            if (sessionStorage.getItem('ZEIT')) {\n              console.log('ZEIT GEFUNDEN');\n              dest = '/mietprozess/empfehlung/';\n              sessionStorage.setItem('wayward_para1', slug);\n            }\n\n            if (!localStorage.getItem('Produkt' + slug)) {\n              var input = env.apiService.generateInput(['slug', slug]);\n              env.apiService.postEndpunkt(input, 'produktbyslug').subscribe(data => {\n                console.log(data);\n                localStorage.setItem('Produkt' + slug, JSON.stringify(data['produkt'])); //marker\n\n                sessionStorage.setItem('wayward', 'historie');\n                console.log(dest + ', ' + slug);\n                console.log(localStorage.getItem('Produkt' + slug));\n                router.navigate([dest, slug], {});\n              });\n            } else {\n              sessionStorage.setItem('wayward', 'historie');\n              console.log(dest + ', ' + slug);\n              console.log(localStorage.getItem('Produkt' + slug));\n              router.navigate([dest, slug], {});\n            }\n          }\n\n          event.preventDefault();\n        });\n        div4.appendChild(a1);\n        div4.appendChild(a2);\n        div1.appendChild(div4);\n        return div1;\n      }\n\n      if (mode == 'Rechnungsadressen2') {\n        var data7 = data_raw[1]; //console.log(data7);\n\n        var router = data_raw[0];\n        var backup = new Array();\n\n        if (!data7['name']) {\n          backup = data7;\n        } else {\n          backup.push(data7['name']);\n          backup.push(data7['strasse']);\n          backup.push(data7['plz']);\n          backup.push(data7['ort']);\n          backup.push(data7['aktive']);\n          backup.push(data7['id']);\n          backup.push(data7['land']);\n          backup.push(data7['zusatz']);\n        }\n\n        var label = document.createElement('label');\n        label.innerHTML = backup[0] + '<br />' + backup[1] + '<br />' + backup[2] + ' ' + backup[3];\n        label.innerHTML += '<input type=\"radio\" name=\"rechnungsadresse\" value=\"2\" id=\"' + backup[5] + '\" />';\n        label.innerHTML += '<span class=\"checkmark checkmark-radio\"></span>';\n        return label;\n      }\n\n      if (mode == 'Rechnungsadressen') {\n        var data7 = data_raw[1]; //console.log(data7);\n\n        var router = data_raw[0];\n        var backup = new Array();\n\n        if (!data7['name']) {\n          backup = data7;\n        } else {\n          backup.push(data7['name']);\n          backup.push(data7['strasse']);\n          backup.push(data7['plz']);\n          backup.push(data7['ort']);\n          backup.push(data7['aktive']);\n          backup.push(data7['id']);\n          backup.push(data7['land']);\n          backup.push(data7['zusatz']);\n        }\n\n        var div1 = document.createElement('div');\n        div1.classList.add('adress-box');\n        var hash = makeid(8);\n        div1.id = 'a' + hash;\n        div1.setAttribute('data-id', backup[5]);\n        div1.setAttribute('data-hash', hash);\n        var p = document.createElement('p');\n        p.innerHTML = backup[0] + '<br />' + backup[1] + '<br />' + backup[2] + ' ' + backup[3] + '<br />';\n        div1.appendChild(p);\n        var a1 = document.createElement('a');\n        a1.classList.add('edit');\n        a1.innerHTML = '<span>Edit</span>';\n        a1.href = 'javascript:void(0);';\n        a1.setAttribute('data-hash', hash);\n        var fallback7 = backup[0] + '|' + backup[1] + '|' + backup[2] + '|' + backup[3] + '|' + backup[4] + '|' + backup[5] + '|' + backup[6] + '|' + backup[7];\n        a1.setAttribute('data-fallback', fallback7);\n        a1.id = 'b' + hash;\n        a1.classList.add('ede' + hash);\n        div1.appendChild(a1);\n        var a2 = document.createElement('a');\n        a2.classList.add('delete');\n        a2.innerHTML = '<span>Delete</span>';\n        a2.href = 'javascript:void(0);';\n        a2.setAttribute('data-hash', hash);\n        a2.id = 'c' + hash;\n        a2.classList.add('del' + hash);\n        div1.appendChild(a2);\n        div1.innerHTML += '<div style=\"clear:both;\"><div></div></div>';\n        return div1;\n      }\n\n      if (mode == 'Standorte') {\n        var data7 = data_raw[1]; //console.log(data7);\n\n        var router = data_raw[0];\n        var backup = new Array();\n\n        if (!data7['name']) {\n          backup = data7;\n        } else {\n          backup.push(data7['name']);\n          backup.push(data7['strasse']);\n          backup.push(data7['plz']);\n          backup.push(data7['ort']);\n          backup.push(data7['aktive']);\n          backup.push(data7['id']);\n          backup.push(data7['land']);\n          backup.push(data7['zusatz']);\n        }\n\n        var div1 = document.createElement('div');\n        div1.classList.add('adress-box');\n        var hash = makeid(8);\n        div1.id = 'a' + hash;\n        div1.setAttribute('data-id', backup[5]);\n        div1.setAttribute('data-hash', hash);\n        var p = document.createElement('p');\n        p.innerHTML = backup[0] + '<br />' + backup[1] + '<br />' + backup[2] + ' ' + backup[3] + '<br /> <strong>Aktive Geräte: ' + backup[4] + '</strong>';\n        div1.appendChild(p);\n        var a1 = document.createElement('a');\n        a1.classList.add('edit');\n        a1.innerHTML = '<span>Edit</span>';\n        a1.href = 'javascript:void(0);';\n        a1.setAttribute('data-hash', hash);\n        var fallback7 = backup[0] + '|' + backup[1] + '|' + backup[2] + '|' + backup[3] + '|' + backup[4] + '|' + backup[5] + '|' + backup[6] + '|' + backup[7];\n        a1.setAttribute('data-fallback', fallback7);\n        a1.id = 'b' + hash;\n        a1.classList.add('ede' + hash);\n        div1.appendChild(a1);\n        var a2 = document.createElement('a');\n        a2.classList.add('delete');\n        a2.innerHTML = '<span>Delete</span>';\n        a2.href = 'javascript:void(0);';\n        a2.setAttribute('data-hash', hash);\n        a2.id = 'c' + hash;\n        a2.classList.add('del' + hash);\n        div1.appendChild(a2);\n        div1.innerHTML += '<div style=\"clear:both;\"><div></div></div>';\n        return div1;\n      }\n\n      if (mode == 'Standorte2') {\n        var data7 = data_raw[1]; //console.log(data7);\n\n        var router = data_raw[0];\n        var backup = new Array();\n\n        if (!data7['name']) {\n          backup = data7;\n        } else {\n          backup.push(data7['name']);\n          backup.push(data7['strasse']);\n          backup.push(data7['plz']);\n          backup.push(data7['ort']);\n          backup.push(data7['aktive']);\n          backup.push(data7['id']);\n          backup.push(data7['land']);\n          backup.push(data7['zusatz']);\n        }\n\n        var div1 = document.createElement('div');\n        div1.classList.add('adress-box');\n        var hash = makeid(8);\n        div1.id = 'a' + hash;\n        div1.setAttribute('data-id', backup[5]);\n        div1.setAttribute('data-hash', hash);\n        var p = document.createElement('p');\n        p.innerHTML = backup[0] + '<br />' + backup[1] + '<br />' + backup[2] + ' ' + backup[3];\n        div1.appendChild(p);\n        var radio = document.createElement('input');\n        radio.type = 'radio';\n        radio.name = 'mystandorte';\n        radio.id = hash;\n        radio.setAttribute('data-id', backup[5]);\n        div1.appendChild(radio);\n        div1.innerHTML += '<span class=\"checkmark checkmark-radio\"></span>';\n        div1.innerHTML += '<div style=\"clear:both;\"><div></div></div>';\n        return div1;\n      }\n\n      if (mode == 'Rechnungshistorie') {\n        var data2 = data_raw[1]; //console.log(data2);\n\n        var router = data_raw[0];\n        var a = document.createElement('a');\n        a.target = '_blank';\n        a.href = data2['link'];\n        a.classList.add('invoice');\n        a.id = data2['rechnungsid'];\n        a.setAttribute('data-standort', data2['standortgerken']);\n        var zeitraum = data2['datum'].split('.')[1] + '.' + data2['datum'].split('.')[2];\n        a.setAttribute('data-zeitraum', zeitraum);\n        a.setAttribute('data-typ', data2['typ']);\n        var p1 = document.createElement('p');\n        p1.classList.add('nr');\n        p1.innerHTML = '<strong>Rechnung #' + data2['rechnungsid'] + '</strong><br />' + data2['datum'];\n        a.appendChild(p1);\n        var p2 = document.createElement('p');\n        p2.classList.add('amount');\n        p2.innerHTML = '<strong>' + data2['preis'] + '€</strong>';\n        a.appendChild(p2);\n        a.innerHTML += '<div style=\"clear:both;\"><div></div></div>';\n        return a;\n      }\n\n      if (mode == 'Nutzerverwaltung') {\n        var data5 = data_raw[1]; //console.log(data5);\n\n        var router = data_raw[0];\n        var hash = makeid(7);\n        var div = document.createElement('div');\n        div.setAttribute('data-hash', hash);\n        div.id = 'c' + hash; //Adressbox\n\n        var div2 = document.createElement('div');\n        div2.classList.add('adress-box');\n\n        if (!data5['name']) {\n          return this.constructHTML('Nutzerverwaltung2', data_raw);\n        }\n\n        var p = document.createElement('p');\n        p.innerHTML = data5['name'] + '<br /><a id=\"d' + hash + '\" href=mailto:' + data5['email'] + '\">' + data5['email'] + '</a><br />';\n        var a17 = document.createElement('a');\n        a17.href = 'javascript:void(0);';\n        a17.innerHTML = '<span>Edit</span>';\n        a17.classList.add('edit');\n        a17.id = 'a17a' + hash;\n        var a18 = document.createElement('a');\n        a18.href = 'javascript:void(0);';\n        a18.innerHTML = '<span>Delete</span>';\n        a18.classList.add('delete');\n        a18.id = 'a18a' + hash;\n        sessionStorage.setItem('user_' + data5['email'], JSON.stringify(data5));\n        div2.appendChild(p);\n        div2.appendChild(a17);\n        div2.appendChild(a18);\n        div2.innerHTML += '<div style=\"clear:both;\"><div></div></div>';\n        div.appendChild(div2);\n        return div;\n      }\n\n      if (mode == 'Nutzerverwaltung2') {\n        var data5 = data_raw[1]; //console.log(data5);\n\n        var router = data_raw[0];\n        var hash = makeid(7);\n        var div = document.createElement('div');\n        div.setAttribute('data-hash', hash);\n        div.setAttribute('data-name', data5[0]);\n        div.setAttribute('data-email', data5[1]);\n        div.id = 'c' + hash; //Adressbox\n\n        var div2 = document.createElement('div');\n        div2.classList.add('adress-box');\n        var p = document.createElement('p');\n        p.innerHTML = data5[0] + '<br /><a id=\"d' + hash + '\" href=mailto:' + data5[1] + '\">' + data5[1] + '</a><br />';\n        var a17 = document.createElement('a');\n        a17.href = 'javascript:void(0);';\n        a17.innerHTML = '<span>Edit</span>';\n        a17.classList.add('edit');\n        a17.id = 'a17a' + hash;\n        var a18 = document.createElement('a');\n        a18.href = 'javascript:void(0);';\n        a18.innerHTML = '<span>Delete</span>';\n        a18.classList.add('delete');\n        a18.id = 'a18a' + hash;\n        sessionStorage.setItem('user_' + data5[1], JSON.stringify(data5));\n        div2.appendChild(p);\n        div2.appendChild(a17);\n        div2.appendChild(a18);\n        div2.innerHTML += '<div style=\"clear:both;\"><div></div></div>';\n        div.appendChild(div2);\n        return div;\n      }\n\n      var fallback = document.createElement('div');\n      return fallback;\n    }\n\n    reload() {\n      let currentUrl = this.router.url;\n      this.router.navigateByUrl('/', {\n        skipLocationChange: true\n      }).then(() => {\n        this.router.navigate([currentUrl]);\n      });\n    }\n\n    reconf(id1, id2, id3) {\n      var plz = document.getElementById(id1).value;\n\n      if (plz.length == 5 || plz.length == 4) {\n        var input = this.generateInput([['postleitzahl', plz]]);\n        this.postEndpunkt(input, 'postleitzahl').subscribe(data => {\n          console.log(data);\n\n          if (data['success']['city']) {\n            document.getElementById(id2).value = data['success']['city'];\n          }\n\n          if (document.getElementById(id3)) {\n            if (data['success']['land']) {\n              document.getElementById(id3).value = data['success']['land'];\n            }\n          }\n        });\n      }\n    }\n\n  }\n\n  ApiService.ɵfac = function ApiService_Factory(t) {\n    return new (t || ApiService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.Router));\n  };\n\n  ApiService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: ApiService,\n    factory: ApiService.ɵfac,\n    providedIn: 'root'\n  });\n  return ApiService;\n})();\n\nfunction makeid(length) {\n  var result = '';\n  var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  var charactersLength = characters.length;\n\n  for (var i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n\n  return result;\n}\n\nfunction setupDOM(router) {\n  console.log('setupDom');\n  sessionStorage.setItem('SetupStateAllowance', 'true');\n\n  if (sessionStorage.getItem('SetupState') != 'complete') {\n    var a = loadMenue(router);\n    console.log('Menue Status: >>' + a + '<<');\n    var b = loadSprachen();\n    console.log('Sprachen Status: >>' + b + '<<');\n    var c = loadLabels('Startseite');\n    console.log('Labels Status: >>' + c + '<<');\n\n    if (a && b && c) {\n      sessionStorage.setItem('SetupState', 'complete');\n    }\n  }\n}\n\nfunction loadMenue(router) {\n  console.log('Menü Start');\n  console.log(JSON.parse(localStorage.getItem('kategorie')));\n\n  if (document.getElementById('id_menu_wrapper')) {\n    console.log('Richte Menü ein.');\n    var lang = sessionStorage.getItem('language');\n\n    if (!lang) {\n      lang = 'DE';\n    }\n\n    var menuestring = localStorage.getItem('menue'); //console.log(lang);\n\n    var menue = JSON.parse(menuestring)[lang];\n    var header = menue['Header'];\n    var footer = menue['Footer'];\n    console.log('HEADER');\n    console.log(header);\n    console.log('FOOTER');\n    console.log(footer); //header\n\n    var frame1 = document.getElementById('header1');\n    var frame2 = document.getElementById('footer1a');\n    var frame3 = document.getElementById('footer2a');\n    console.log('check7');\n    var count = header['count'];\n    frame1.innerHTML = '';\n\n    for (let i = 0; i < count; i++) {\n      var li = document.createElement('li');\n      li.id = makeid(9);\n\n      if (!header[i]['only'] || header[i]['only'] && sessionStorage.getItem('Usertoken')) {\n        if (header[i]['sub']) {\n          li.classList.add('has-sub');\n          li.innerHTML = '<a href=\"javascript:void(0);\">' + header[i]['title'] + '</a>';\n          var ul = document.createElement('ul');\n          ul.id = makeid(8);\n          ul.classList.add('sub'); //li.appendChild(ul);\n\n          var count2 = header[i]['sub']['count'];\n          var list1 = Array();\n\n          for (let j = 0; j < count2; j++) {\n            var li2 = document.createElement('li');\n\n            if (!header[i]['sub'][j]['only'] || header[i]['sub'][j]['only'] && sessionStorage.getItem('Usertoken')) {\n              if (header[i]['sub'][j]['inside'] == true) {\n                var hash = makeid(7);\n                li2.innerHTML = '<a href=\"javascript:void(0);\" id=\"' + hash + '\" data-link=\"' + header[i]['sub'][j]['link'] + '\">' + header[i]['sub'][j]['title'] + '</a>';\n                ul.appendChild(li2);\n                list1.push(hash);\n              } else {\n                li2.innerHTML = '<a href=\"' + header[i]['sub'][j]['link'] + '\">' + header[i]['sub'][j]['title'] + '</a>';\n                ul.appendChild(li2);\n              }\n            }\n          }\n\n          li.appendChild(ul);\n          frame1.appendChild(li);\n          document.getElementById(li.id).addEventListener('click', function (event) {\n            if ($(this).hasClass('active')) {\n              $(this).removeClass('active');\n            } else {\n              $(this).addClass('active');\n            }\n\n            $(this).find('.sub').slideToggle();\n          });\n\n          for (let k = 0; k < list1.length; k++) {\n            console.log(list1[k]);\n            document.getElementById(list1[k]).addEventListener('click', function (event) {\n              router.navigate([this.getAttribute('data-link')], {});\n              console.log('drin 1');\n\n              if ($('body').hasClass('open')) {\n                $('body').removeClass('open');\n                $('#id_overlay').fadeOut();\n                $('#id_menu_wrapper').fadeOut();\n              }\n            });\n          }\n        } else {\n          console.log(header[i]['inside']);\n\n          if (header[i]['inside'] == true) {\n            var hash = makeid(7);\n            li.innerHTML = '<a href=\"javascript:void(0);\" id=\"' + hash + '\" data-link=\"' + header[i]['link'] + '\">' + header[i]['title'] + '</a>';\n            frame1.appendChild(li);\n            document.getElementById(hash).addEventListener('click', function (event) {\n              console.log('drin 2');\n              router.navigate([this.getAttribute('data-link')], {});\n\n              if ($('body').hasClass('open')) {\n                $('body').removeClass('open');\n                $('#id_overlay').fadeOut();\n                $('#id_menu_wrapper').fadeOut();\n              }\n            });\n          } else {\n            li.innerHTML = '<a href=\"' + header[i]['link'] + '\">' + header[i]['title'] + '</a>';\n            frame1.appendChild(li);\n          }\n        }\n      }\n    }\n\n    var count = footer[1]['count'];\n    frame2.innerHTML = '';\n\n    for (let i = 0; i < count; i++) {\n      var li = document.createElement('li');\n      var a = document.createElement('a');\n      a.href = footer[1][i]['link'];\n      a.title = footer[1][i]['title'];\n      a.innerHTML = footer[1][i]['title'];\n      li.appendChild(a);\n      frame2.appendChild(li);\n    }\n\n    var count = footer[0]['count'];\n    frame3.innerHTML = '';\n\n    for (let i = 0; i < count; i++) {\n      var li = document.createElement('li');\n      var a = document.createElement('a');\n      a.href = footer[0][i]['link'];\n      a.target = '_blank';\n      a.title = footer[0][i]['title'];\n      a.classList.add(footer[0][i]['title'].toLowerCase());\n      a.innerHTML = '<span>' + footer[0][i]['title'] + '</span>';\n      li.appendChild(a);\n      frame3.appendChild(li);\n    } //footer\n\n\n    var frame4 = document.getElementById('footer1b');\n    var frame5 = document.getElementById('footer2b');\n    var count = footer[1]['count'];\n    frame5.innerHTML = '';\n\n    for (let i = 0; i < count; i++) {\n      var li = document.createElement('li');\n      var a = document.createElement('a');\n      a.href = footer[1][i]['link'];\n      a.title = footer[1][i]['title'];\n      a.innerHTML = footer[1][i]['title'];\n      li.appendChild(a);\n      frame5.appendChild(li);\n    }\n\n    var count = footer[0]['count'];\n    frame4.innerHTML = '';\n\n    for (let i = 0; i < count; i++) {\n      var li = document.createElement('li');\n      var a = document.createElement('a');\n      a.href = footer[0][i]['link'];\n      a.target = '_blank';\n      a.title = footer[0][i]['title'];\n      a.classList.add(footer[0][i]['title'].toLowerCase());\n      a.innerHTML = '<span>' + footer[0][i]['title'] + '</span>';\n      li.appendChild(a);\n      frame4.appendChild(li);\n    }\n\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction loadSprachen() {\n  if (document.getElementById('language_whole')) {\n    var lang = 'DE';\n\n    if (sessionStorage.getItem('language')) {\n      lang = sessionStorage.getItem('language');\n    }\n\n    var border = document.getElementById('language_whole');\n    border.innerHTML = '';\n    var first = document.createElement('a');\n    first.href = 'javascript:void(0);';\n    first.id = 'id_language_select';\n    first.innerHTML = lang;\n\n    first.onclick = function () {\n      lang_tmp();\n    };\n\n    border.appendChild(first);\n    sessionStorage.setItem('language', lang);\n    var sprachen = JSON.parse(localStorage.getItem('sprachen'));\n    var count = sprachen['count'];\n    var list = Array();\n\n    for (let i = 0; i < count; i++) {\n      list.push(sprachen[i]);\n    }\n\n    var rest = document.createElement('ul');\n    rest.id = 'id_languages';\n\n    for (let i = 0; i < list.length; i++) {\n      if (list[i] != lang) {\n        var entry = document.createElement('li');\n        var innerstlink = document.createElement('a');\n        innerstlink.href = 'javascript:void(0);';\n        innerstlink.innerHTML = list[i];\n\n        innerstlink.onclick = function () {\n          langswitch(list[i]);\n        };\n\n        entry.appendChild(innerstlink);\n        rest.appendChild(entry);\n      }\n    }\n\n    border.appendChild(rest);\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction loadLabels(title) {\n  if (document.getElementById(title)) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction innerRouting(route) {\n  //router.navigate(['/', route], {});\n  console.log(route);\n}\n\nfunction langswitch(lang) {\n  var reload = true;\n  sessionStorage.setItem('language', lang); //console.log(sessionStorage.getItem('language'));\n\n  if (localStorage.getItem(lang + '_changed')) {\n    //var menue = JSON.parse(localStorage.getItem('Startseite_end'));\n    var local_changed = parseInt(localStorage.getItem(lang + '_changed'));\n    var endpunkt = JSON.parse(localStorage.getItem('language' + lang + '_end'));\n    var endpunkt_changed = parseInt(endpunkt['changed']);\n\n    if (local_changed >= endpunkt_changed) {\n      reload = false;\n    }\n\n    loadSprachen();\n  }\n\n  if (reload) {\n    //Wenn nichts aktuelles vorhanden ist, lade Sprache\n\n    /*\n    this.language(lang).subscribe((data) => {\n      sessionStorage.setItem('language', lang);\n      localStorage.setItem(lang + '_changed', data['changed']);\n      var count = data['count'];\n      for (let i = 0; i < count; i++) {\n        var tmp = data[i];\n        var name = tmp['title_element'] + '_' + lang;\n        localStorage.setItem(name, JSON.stringify(tmp));\n      }\n      loadSprachen(lang);\n    });\n    */\n    window.location.reload();\n  }\n}\n\nfunction sub(x) {\n  console.log('Outer Api:' + x); //if (sessionStorage.getItem('DEV') == 'true') {\n\n  var subs = document.getElementsByClassName('sub');\n  var hassubs = document.getElementsByClassName('has-sub');\n\n  for (let i = 0; i < subs.length; i++) {\n    if (i == x) {\n      if (!subs[i].style.display || subs[i].style.display == 'none') {\n        subs[i].style.display = 'block';\n        hassubs[i].classList.add('active');\n      } else {\n        subs[i].style.display = 'none';\n        hassubs[i].classList.remove('active');\n      }\n    }\n  } //}\n\n}\n\nfunction lang_tmp() {\n  if (sessionStorage.getItem('DEV') == 'true' || !sessionStorage.getItem('DEV')) {\n    if (!document.getElementById('id_languages').style.display || document.getElementById('id_languages').style.display == 'none') {\n      document.getElementById('id_languages').style.display = 'block';\n    } else {\n      document.getElementById('id_languages').style.display = 'none';\n    }\n  }\n}\n\nfunction menue_tmp() {\n  console.log('api');\n\n  if (sessionStorage.getItem('DEV') == 'true') {\n    console.log('GLOABL API');\n    var menue = document.getElementById('id_menu_wrapper'); //console.log(menue!.classList!.contains('open'));\n\n    if (!menue.classList.contains('open')) {\n      menue.classList.add('open');\n      menue.style.display = 'block';\n    } else {\n      menue.classList.remove('open');\n      menue.style.display = 'none';\n    }\n  }\n}","map":null,"metadata":{},"sourceType":"module"}