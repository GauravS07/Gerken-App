{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction StandorteComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵelementStart(1, \"h3\", 15);\n    i0.ɵɵtext(2, \"Standort anlegen\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"form\", 16);\n    i0.ɵɵelementStart(4, \"label\");\n    i0.ɵɵtext(5, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 17);\n    i0.ɵɵelementStart(7, \"label\");\n    i0.ɵɵtext(8, \"Str./Nr.*\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 18);\n    i0.ɵɵelementStart(10, \"div\", 19);\n    i0.ɵɵelementStart(11, \"label\");\n    i0.ɵɵtext(12, \"PLZ*\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"input\", 20);\n    i0.ɵɵlistener(\"input\", function StandorteComponent_ng_template_9_Template_input_input_13_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.reconf(\"new_plz\", \"new_ort\", \"new_land\");\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 21);\n    i0.ɵɵelementStart(15, \"label\");\n    i0.ɵɵtext(16, \"Ort*\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(17, \"input\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"label\");\n    i0.ɵɵtext(19, \"Land\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"select\", 23);\n    i0.ɵɵelementStart(21, \"option\");\n    i0.ɵɵtext(22, \"Deutschland\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"option\");\n    i0.ɵɵtext(24, \"Belgien\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"option\");\n    i0.ɵɵtext(26, \"Niederlande\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"label\");\n    i0.ɵɵtext(28, \"Zus\\u00E4tzliche Information zur Adresse\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(29, \"textarea\", 24);\n    i0.ɵɵelement(30, \"input\", 25);\n    i0.ɵɵelement(31, \"input\", 26);\n    i0.ɵɵelementStart(32, \"div\", 27);\n    i0.ɵɵelementStart(33, \"input\", 28);\n    i0.ɵɵlistener(\"click\", function StandorteComponent_ng_template_9_Template_input_click_33_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.saveStandort();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"div\", 3);\n    i0.ɵɵelement(35, \"div\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"div\", 29);\n    i0.ɵɵelementStart(37, \"h3\");\n    i0.ɵɵtext(38, \"Sind Sie sich sicher, dass Sie diesen Standort l\\u00F6schen m\\u00F6chten?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"form\", 16);\n    i0.ɵɵelementStart(40, \"div\", 27);\n    i0.ɵɵelementStart(41, \"input\", 30);\n    i0.ɵɵlistener(\"click\", function StandorteComponent_ng_template_9_Template_input_click_41_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.deleteStandort();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"input\", 31);\n    i0.ɵɵlistener(\"click\", function StandorteComponent_ng_template_9_Template_input_click_42_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.closeStandort();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"div\", 3);\n    i0.ɵɵelement(44, \"div\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let StandorteComponent = /*#__PURE__*/(() => {\n  class StandorteComponent {\n    constructor(apiService, router) {\n      this.apiService = apiService;\n      this.router = router;\n      this.eingeloggt = false;\n      this.email = '';\n      this.token = '';\n      this.apiService.externalLogoutCheck();\n\n      if (sessionStorage.getItem('SetupStateAllowance') == 'true') {\n        this.apiService.setupDOM(this.router);\n      } else {\n        this.apiService.startupChain2(1);\n      }\n    }\n\n    ngOnInit() {\n      if (sessionStorage.getItem('Email') && sessionStorage.getItem('Usertoken')) {\n        this.eingeloggt = true;\n        this.email = sessionStorage.getItem('Email');\n        this.token = sessionStorage.getItem('Usertoken');\n      }\n    }\n\n    reconf(id1, id2, id3) {\n      this.apiService.reconf(id1, id2, id3);\n    }\n\n    onload() {\n      var index = parseInt(sessionStorage.getItem('Stateindex'));\n      console.log(\"Index: \" + index);\n\n      if (index != 0 && index) {\n        document.getElementById('id_c2a').style.display = 'block';\n      } else {\n        document.getElementById('id_c2a').style.display = 'none';\n      }\n\n      scroll(0, 0);\n      this.apiService.externalLogoutCheck2();\n\n      if (document.getElementById('testmarker')) {\n        if (document.getElementById('testmarker').innerHTML == 'TEST') {\n          this.apiService.loadMenue(this.router);\n        }\n      }\n\n      this.loadStandort();\n    }\n\n    loadStandort() {\n      var email = sessionStorage.getItem('Email');\n      var token = sessionStorage.getItem('Usertoken');\n      var input = this.apiService.generateInput([['email', email], ['token', token]]);\n\n      if (sessionStorage.getItem('Standorte')) {\n        var data = sessionStorage.getItem('Standorte');\n        console.log(data);\n        this.constructStandort(JSON.parse(data)['standorte']);\n      } else {\n        this.apiService.postEndpunkt(input, 'standorte1').subscribe(data => {\n          console.log(data);\n          sessionStorage.setItem('Standorte', JSON.stringify(data));\n          this.constructStandort(data['standorte']);\n        });\n      }\n    }\n\n    closeStandort() {\n      $.fancybox.close();\n    }\n\n    saveStandort() {\n      var hash = this.apiService.makeid(7);\n\n      if (document.getElementById('new_id').value != '') {\n        hash = document.getElementById('new_id').value;\n      }\n\n      var name = document.getElementById('new_name').value;\n      var zusatz = document.getElementById('new_zusatz').value;\n      var strasse = document.getElementById('new_strasse').value;\n      var plz = document.getElementById('new_plz').value;\n      var ort = document.getElementById('new_ort').value;\n      var land = document.getElementById('new_land').value;\n      var aktive = '0';\n\n      if (document.getElementById('new_aktive').value != '0') {\n        aktive = document.getElementById('new_aktive').value;\n      }\n\n      var email = sessionStorage.getItem('Email');\n      var token = sessionStorage.getItem('Usertoken');\n      var input = this.apiService.generateInput([['email', email], ['token', token], ['id', hash], ['name', name], ['zusatz', zusatz], ['strasse', strasse], ['plz', plz], ['ort', ort], ['land', land]]);\n      this.apiService.postEndpunkt(input, 'standorte2').subscribe(data => {\n        console.log(data);\n\n        if (data['result_check']) {\n          document.getElementById('new_name').value = '';\n          document.getElementById('new_zusatz').value = '';\n          document.getElementById('new_strasse').value = '';\n          document.getElementById('new_plz').value = '';\n          document.getElementById('new_ort').value = '';\n          this.apiService.postEndpunkt(input, 'standorte1').subscribe(data2 => {\n            console.log(data2);\n            sessionStorage.setItem('Standorte', JSON.stringify(data2));\n            console.log('reconstruct');\n            this.constructStandort(data2['standorte']);\n          });\n        }\n      });\n      $.fancybox.close();\n    }\n\n    newStandort() {\n      document.getElementById('new_name').value = '';\n      document.getElementById('new_strasse').value = '';\n      document.getElementById('new_plz').value = '';\n      document.getElementById('new_ort').value = '';\n      document.getElementById('new_zusatz').value = '';\n      document.getElementById('new_land').value = 'Deutschland';\n      document.getElementById('new_id').value = '';\n      document.getElementById('new_title').innerHTML = 'Standort anlegen';\n      document.getElementById('new_aktive').value = '0';\n      $.fancybox.open({\n        touch: false,\n        src: '#id_modal_adress',\n        type: 'inline',\n        opts: {}\n      });\n    }\n\n    constructStandort(data) {\n      var count = data['count'];\n      var border = document.getElementById('standorte');\n      border.innerHTML = '';\n      console.log('construction'); //console.log(data);\n\n      for (let i = 0; i < count; i++) {\n        var ele = this.apiService.constructHTML('Standorte', [this.router, data[i]]);\n        var hash = ele.getAttribute('data-hash');\n        console.log('Hash: ' + hash);\n        border.appendChild(ele);\n        document.getElementById('b' + hash).addEventListener('click', function (event) {\n          console.log('Edit');\n          $.fancybox.open({\n            touch: false,\n            src: '#id_modal_adress',\n            type: 'inline',\n            opts: {}\n          }); //lade die infos in das Modal:\n\n          var fallback = this.getAttribute('data-fallback').split('|');\n          console.log(fallback);\n          document.getElementById('new_name').value = fallback[0];\n          document.getElementById('new_strasse').value = fallback[1];\n          document.getElementById('new_plz').value = fallback[2];\n          document.getElementById('new_ort').value = fallback[3];\n          document.getElementById('new_zusatz').value = fallback[7];\n          document.getElementById('new_land').value = fallback[6];\n          document.getElementById('new_id').value = fallback[5];\n          document.getElementById('new_aktive').value = fallback[4];\n          document.getElementById('new_title').innerHTML = 'Standort bearbeiten';\n          event.preventDefault();\n        });\n        document.getElementById('c' + hash).addEventListener('click', function (event) {\n          console.log('Delete');\n          console.log(hash);\n          document.getElementById('approve').setAttribute('data-src', this.getAttribute('data-hash'));\n          $.fancybox.open({\n            touch: false,\n            src: '#id_modal_delete',\n            type: 'inline',\n            opts: {}\n          });\n          event.preventDefault();\n        });\n      }\n    }\n\n    deleteStandort() {\n      var hash = document.getElementById('approve').getAttribute('data-src');\n      console.log(hash);\n      var name = 'a' + hash;\n      var id = document.getElementById(name).getAttribute('data-id');\n      document.getElementById(name).remove(); //email, usertoken, id\n      //var input={{}}\n\n      var input = this.apiService.generateInput([['email', sessionStorage.getItem('Email')], ['token', sessionStorage.getItem('Usertoken')], ['id', id]]);\n      console.log(input);\n      this.apiService.postEndpunkt(input, 'standorte3').subscribe(data => {\n        console.log(data);\n        sessionStorage.setItem('Standorte', JSON.stringify(data['erfolg']));\n        this.constructStandort(data['erfolg']);\n      });\n      $.fancybox.close();\n    }\n\n  }\n\n  StandorteComponent.ɵfac = function StandorteComponent_Factory(t) {\n    return new (t || StandorteComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  StandorteComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: StandorteComponent,\n    selectors: [[\"app-standorte\"]],\n    decls: 39,\n    vars: 1,\n    consts: [[1, \"account\"], [1, \"module\", \"red\"], [1, \"inner\", \"title\"], [2, \"clear\", \"both\"], [3, \"ngIf\"], [1, \"inner\", \"inner-intended\"], [\"id\", \"standorte\"], [1, \"adress-box\"], [\"href\", \"#\", 1, \"edit\"], [\"href\", \"#\", 1, \"delete\"], [1, \"centered\"], [1, \"btn\", \"btn-outline\", 3, \"click\"], [2, \"display\", \"none\"], [\"src\", \"https://diesdas.codersunlimited.de/diesdas/assets/images/_temp/product.jpg\", 3, \"load\"], [\"id\", \"id_modal_adress\", 1, \"modal\", 2, \"display\", \"none\"], [\"id\", \"new_title\"], [\"onsubmit\", \"event.preventDefault();\"], [\"type\", \"text\", \"name\", \"xxx\", \"placeholder\", \"Standort 1\", \"required\", \"required\", \"id\", \"new_name\"], [\"type\", \"email\", \"name\", \"xxx\", \"placeholder\", \"Musterstr. 11\", \"required\", \"required\", \"id\", \"new_strasse\"], [1, \"form-left\"], [\"type\", \"email\", \"name\", \"xxx\", \"placeholder\", \"11111\", \"required\", \"required\", \"id\", \"new_plz\", \"maxlength\", \"5\", 3, \"input\"], [1, \"form-right\"], [\"type\", \"email\", \"name\", \"xxx\", \"placeholder\", \"Musterstadt\", \"required\", \"required\", \"id\", \"new_ort\"], [\"id\", \"new_land\"], [\"id\", \"new_zusatz\"], [\"type\", \"hidden\", \"id\", \"new_id\", \"value\", \"\"], [\"type\", \"hidden\", \"id\", \"new_aktive\", \"value\", \"\"], [1, \"centered\", \"space\"], [\"type\", \"submit\", \"name\", \"submit\", \"value\", \"Speichern\", 3, \"click\"], [\"id\", \"id_modal_delete\", 1, \"modal\", 2, \"display\", \"none\"], [\"type\", \"submit\", \"name\", \"submit\", \"value\", \"Ja\", \"id\", \"approve\", \"data-src\", \"\", 3, \"click\"], [\"type\", \"submit\", \"name\", \"submit\", \"value\", \"Nein\", 3, \"click\"]],\n    template: function StandorteComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"h1\");\n        i0.ɵɵtext(4, \"Baustellen/Standorte\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 3);\n        i0.ɵɵelement(6, \"div\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 3);\n        i0.ɵɵelement(8, \"div\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(9, StandorteComponent_ng_template_9_Template, 45, 0, \"ng-template\", 4);\n        i0.ɵɵelementStart(10, \"div\", 5);\n        i0.ɵɵelementStart(11, \"div\", 6);\n        i0.ɵɵelementStart(12, \"div\", 7);\n        i0.ɵɵelementStart(13, \"p\");\n        i0.ɵɵtext(14, \" Test Empf\\u00E4nger\");\n        i0.ɵɵelement(15, \"br\");\n        i0.ɵɵtext(16, \" Teststr. 11\");\n        i0.ɵɵelement(17, \"br\");\n        i0.ɵɵtext(18, \" 11111 Testdort\");\n        i0.ɵɵelement(19, \"br\");\n        i0.ɵɵelementStart(20, \"strong\");\n        i0.ɵɵtext(21, \"Aktive Ger\\u00E4te: 42\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"a\", 8);\n        i0.ɵɵelementStart(23, \"span\");\n        i0.ɵɵtext(24, \"Edit\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"a\", 9);\n        i0.ɵɵelementStart(26, \"span\");\n        i0.ɵɵtext(27, \"Delete\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"div\", 3);\n        i0.ɵɵelement(29, \"div\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"div\", 3);\n        i0.ɵɵelement(31, \"div\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 10);\n        i0.ɵɵelementStart(33, \"a\", 11);\n        i0.ɵɵlistener(\"click\", function StandorteComponent_Template_a_click_33_listener() {\n          return ctx.newStandort();\n        });\n        i0.ɵɵtext(34, \"Neuen Standort anlegen\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"div\", 3);\n        i0.ɵɵelement(36, \"div\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"div\", 12);\n        i0.ɵɵelementStart(38, \"img\", 13);\n        i0.ɵɵlistener(\"load\", function StandorteComponent_Template_img_load_38_listener() {\n          return ctx.onload();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngIf\", ctx.eingeloggt);\n      }\n    },\n    directives: [i3.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgSelectOption, i4.ɵNgSelectMultipleOption],\n    styles: [\"\"]\n  });\n  return StandorteComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}